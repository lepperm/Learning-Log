---
layout: page
title: Stats
exclude: false
permalink: /stats/
jsfiles:
cssfiles:
---

{%- comment -%}
=======================
Reuse all extracted data from our generated search.json file for use on this page
=======================
{%- endcomment -%}

{%- assign layouts = '' | split: ','-%}
{%- assign dates = '' | split: ',' -%}
{%- assign times = '' | split: ',' -%}
{%- assign wordcount = '' | split: ',' -%}
{%- assign reflist = '' | split: ',' -%}

{% for stat in site.data.search %}

  {%- if stat.layout != "" -%}
    {%- if layouts == "" -%}
      {%- assign layouts = layouts | push: stat.layout -%}
    {%- else -%}
      {%- assign layouts = layouts | push: stat.layout -%}
    {%- endif -%}
  {%- endif -%}

  {%- if stat.datetime != "" -%}
    {%- if dates == "" -%}
      {%- assign dates = dates | push: stat.datetime -%}
    {%- else -%}
      {%- assign dates = dates | push: stat.datetime -%}
    {%- endif -%}
  {%- endif -%}

  {%- if stat.timespent != "" -%}
    {%- if times == "" -%}
      {%- assign times = times | push: stat.timespent -%}
    {%- else -%}
      {%- assign times = times | push: stat.timespent -%}
    {%- endif -%}
  {%- endif -%}

  {%- if stat.words != "" -%}
    {%- if wordcount == "" -%}
      {%- assign wordcount = wordcount | push: stat.words -%}
    {%- else -%}
      {%- assign wordcount = wordcount | push: stat.words -%}
    {%- endif -%}
  {%- endif -%}

  {%- if stat.references != "" -%}
    {%- assign references = stat.references | split: ',' -%}
    {%- if reflist == "" -%}
      {%- assign reflist = reflist | concat: references -%}
    {%- else -%}
      {%- assign reflist = reflist | concat: references -%}
    {%- endif -%}
  {%- endif -%}

{%- endfor -%}

{%- comment -%}
=======================
Actual data output to the page
=======================
{%- endcomment -%}

<h2>
  Top Logged Skills
</h2>

{%- assign sortSkills = site.data.skills | sort: "time" | reverse -%}

<ol>
  {%- for skill in sortSkills limit:5-%}
    <li>
      <a href="/learning-log/skills#{{ skill.name }}" >
        <strong>{{ skill.name }}</strong>
      </a>
    </li>
  {%- endfor -%}
</ol>

<h2>
  Total Time Logged
</h2>

{%- for time in times -%}
  {%- assign timeSum = timeSum | to_integer | plus:time -%}
{%- endfor -%}

{%- capture prettyTotalTime -%}
  {%- include min-to-time.html timeVal=timeSum verbose=true -%}
{%- endcapture -%}

<ul>
  <li>
    <strong>{{ prettyTotalTime }}</strong> of time has been logged to skill development on this site
  </li>
</ul>

<br/><br/>
<h2>
  Words
</h2>

{%- for counts in wordcount -%}
  {%- assign wordSum = wordSum | plus:counts -%}
{%- endfor -%}

{%- assign aveSum = wordSum | divided_by: wordcount.size -%}

<ul>
  <li>
    <strong>{{ wordSum }}</strong> total words typed across all posts
  </li>
  <li>
    That's roughly <strong>{%- include time-to-read.html output="time" rawcount=wordSum -%}</strong> minutes of reading
  </li>
  <li>
    Each post is an average length of <strong>{{ aveSum }}</strong> words each
  </li>
</ul>

<br/><br/>
<h2>
  Average Time Between Posts
</h2>

{%- comment -%}
=======================
Discard dateDiff values over 10 years old
This may eventually be an issue???
=======================
{%- endcomment -%}

{%- assign sortDates = dates | sort -%}
{%- assign dateDiffs = '' | split: "," -%}
{%- for date in dates -%}
  {%- assign nextPosition = forloop.index0 | plus: 1 -%}
  {%- assign date1 = date | date: '%s' -%}
  {%- assign date2 = dates[nextPosition] | date: '%s' -%}
  {%- assign dateDiff = date1 | minus: date2 -%}
  {%- if dateDiff < 315569520 -%}
    {%- assign dateDiffs = dateDiffs | push: dateDiff -%}
  {%- endif -%}
{%- endfor -%}

{%- for diff in dateDiffs -%}
  {%- assign diffSum = diffSum | to_integer | plus:diff -%}
{%- endfor -%}

{%- assign aveDiv = dateDiffs | size -%}
{%- if aveDiv > 0 -%}
  {%- assign diffAve = diffSum | divided_by: aveDiv -%}
  {%- assign diffAve = diffAve | divided_by: 60 -%}
{%- endif -%}

{%- capture prettyDiffTime -%}
  {%- include min-to-time.html timeVal=diffAve verbose=true -%}
{%- endcapture -%}

<ul>
  <li>
    One post is published approximately every <strong>{{ prettyDiffTime }}</strong>
  </li>
</ul>

<br/><br/>
<h2>
  Total Posts By Type
</h2>

{%- assign layoutCounts = '' | split: ',' -%}
{%- assign uniqLayouts = layouts | uniq -%}
{%- for uniqLayout in uniqLayouts -%}
  {%- assign layoutCount = 0 -%}
  {%- for layout in layouts -%}
    {%- if layout == uniqLayout -%}
      {%- assign layoutCount = layoutCount | plus: 1 -%}
    {%- endif -%}
  {%- endfor -%}
  {%- assign layoutCounts = layoutCounts | push: layoutCount -%}
{%- endfor -%}

<ul>
{%- for dispLayout in uniqLayouts -%}
  {% assign position = forloop.index0 %}
    <li>
      <a href="/learning-log/categories#{{ dispLayout }}" >
        <strong>{{ dispLayout | capitalize }}s:</strong>
      </a>
      &nbsp;&nbsp;&nbsp;{{ layoutCounts[position] }}
    </li>
{%- endfor -%}
</ul>

<br/><br/>

<h2>
  Top Used References
</h2>

{%- assign topRefs = 5 -%}

{%- comment -%}
=======================
I need to figure out how to sort these two independent
arrays together before this will work correctly
=======================
{%- endcomment -%}

{%- assign uniqReflist = reflist | uniq -%}
{%- assign refCounts = '' | split: ',' -%}
{%- assign uniqReflist = reflist | uniq -%}
{%- for uniqRef in uniqReflist -%}
  {%- assign refCount = 0 -%}
  {%- for ref in reflist -%}
    {%- if ref == uniqRef -%}
      {%- assign refCount = refCount | plus: 1 -%}
    {%- endif -%}
  {%- endfor -%}
  {%- assign refString = refCount | append: "," -%}
  {%- assign refString = refString | append: uniqRef -%}
  {%- assign refCounts = refCounts | push: refString -%}
  {%- assign refCounts = refCounts | sort | reverse -%}
{%- endfor -%}
<ol>
  {%- if topRefs == 0 -%}
    <li>
      <strong>TBD</strong>
    </li>
  {%- else -%}
    {%- for dispRefs in refCounts limit:topRefs -%}
      {% assign splitRefs = dispRefs | split: "," %}
        <li>
          <a href={{ splitRefs[1] }}>{{ splitRefs[1] | truncate: 40 }}</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Referenced <strong>{{ splitRefs[0] }}</strong> times
        </li>
    {%- endfor -%}
  {%- endif -%}
</ol>
